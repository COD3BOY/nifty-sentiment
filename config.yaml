# NIFTY Sentiment Prediction System Configuration

sources:
  gift_nifty:
    enabled: true
    weight: 2.5
    timeout: 30
    description: "GIFT Nifty pre-market gap"
    gap_pct_scale: 2.0  # 1% gap maps to 0.5 score

  zerodha_pulse:
    enabled: true
    weight: 2.0
    timeout: 30
    description: "News sentiment via Zerodha Pulse"
    max_headlines: 20
    rss_url: "https://pulse.zerodha.com/feed.php"

  global_markets:
    enabled: true
    weight: 2.0
    timeout: 30
    description: "S&P 500, Nikkei, Hang Seng, FTSE"
    indices:
      "^GSPC": { name: "S&P 500", weight: 1.0 }
      "^N225": { name: "Nikkei 225", weight: 0.7 }
      "^HSI": { name: "Hang Seng", weight: 0.7 }
      "^FTSE": { name: "FTSE 100", weight: 0.5 }

  fii_dii:
    enabled: true
    weight: 1.8
    timeout: 30
    description: "FII/DII institutional flows"
    significant_flow_cr: 2000
    fii_weight: 0.7
    dii_weight: 0.3

  vix:
    enabled: true
    weight: 1.5
    timeout: 30
    description: "India VIX fear gauge"
    ticker: "^INDIAVIX"
    spike_threshold: 10  # % day-over-day rise
    spike_amplification: 0.3

  crude_oil:
    enabled: true
    weight: 1.0
    timeout: 30
    description: "Brent crude + USD/INR"
    crude_ticker: "BZ=F"
    inr_ticker: "INR=X"
    crude_weight: 0.6
    inr_weight: 0.4

  youtube:
    enabled: false
    weight: 0.8
    timeout: 60
    description: "YouTube financial advisor sentiment"
    channels:
      - "CA Rachana Ranade"
      - "Akshat Shrivastava"
      - "Pranjal Kamra"

  reddit:
    enabled: false
    weight: 0.5
    timeout: 30
    description: "r/IndianStreetBets sentiment"
    subreddit: "IndianStreetBets"
    post_limit: 25
    confidence_discount: 0.7

engine:
  default_timeout: 30
  nifty_ticker: "^NSEI"
  sentiment_levels:
    strongly_bearish: -0.6
    bearish: -0.3
    slightly_bearish: -0.1
    neutral_low: -0.1
    neutral_high: 0.1
    slightly_bullish: 0.1
    bullish: 0.3
    strongly_bullish: 0.6

database:
  path: "data/nifty_sentiment.db"

claude:
  model: "claude-sonnet-4-5-20250929"
  max_tokens: 4096

pre_market:
  weights:
    gift_nifty: 3.0
    global_markets: 2.5
    zerodha_pulse: 2.0
    fii_dii: 1.8
    vix: 1.5
    crude_oil: 1.0

options_desk:
  symbol: "NIFTY"
  nifty_ticker: "^NSEI"
  candles:
    period: "5d"
    interval: "5m"
  indicators:
    ema_fast: 9
    ema_mid: 21
    ema_slow: 50
    rsi_period: 9
    supertrend_period: 10
    supertrend_multiplier: 3.0
    bb_period: 20
    bb_std: 2.0
  signal_thresholds:
    rsi_overbought: 70
    rsi_oversold: 30
    pcr_bullish: 1.2
    pcr_bearish: 0.7
    iv_high: 18
    iv_low: 10
  trade_suggestions:
    lot_size: 65
    otm_offset: 2
    spread_width: 2
    min_score: 20

paper_trading:
  initial_capital: 2500000
  lot_size: 65
  auto_execute: true
  max_positions: 5
  min_score_to_trade: 30
  max_lots: 4
  capital_utilization: 0.70
  stop_loss:
    credit_fallback_multiplier: 1.0
    debit_premium_pct: 0.40
  profit_target:
    credit_pct: 0.30
    debit_pct: 0.50
  execution_cost:
    brokerage_per_order: 20
    stt_sell_pct: 0.001
    exchange_txn_pct: 0.00035
    gst_pct: 0.18
    stamp_duty_buy_pct: 0.00003
  margin_estimates:
    short_straddle: 175000
    short_strangle: 155000
    bull_put_spread: 35000
    bear_call_spread: 35000
    bull_call_spread: 0
    bear_put_spread: 0
    iron_condor: 40000
    long_call_ce: 0
    long_put_pe: 0
    long_straddle: 0
    long_strangle: 0

criticizer:
  enabled: true
  auto_critique: true
  min_trades_for_override: 3
  max_parameter_drift_pct: 0.30
  override_min_confidence: 0.7

dashboard:
  title: "NIFTY Sentiment Dashboard"
  auto_refresh_seconds: 300
  history_days: 30
